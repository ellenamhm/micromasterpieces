<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimal-ui"/>
	<link rel="icon" type="image/png" href="images/favicon.png" />
	<title>Micro Masterpieces</title>
	<link rel='stylesheet' id='sydney-fonts-css'  href='https://fonts.googleapis.com/css?family=Source+Sans+Pro%3A400%2C400italic%2C600%7CRaleway%3A400%2C500%2C600' type='text/css' media='all' />
	<link type="text/css" rel="stylesheet" href="css/styles.css">
	<link type="text/css" rel="stylesheet" href="fonts/icon-font/css/icon-font.css">
	<link rel="stylesheet" type="text/css" href="css/xzoom.css" media="all" />
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css">
   
</head>

<body>

<div class="preloader">
	<div class="preloader__progress">
		<img src="images/loader.gif" alt="">
	</div>
</div>


<div class="wrapper">

<header class="header">
	<a class="header__btn-menu icon icon--menu js-toggle-menu">
		<span></span>
		<span></span>
		<span></span>
		<span></span>
		<span></span>
		<span></span>
	</a>
	
	<a class="header__btn-close icon icon--cancel js-modal-close">
		<span></span>
		<span></span>
	</a>
	<a class="psa-btn-close"><span></span><span></span></a>

	
</header>

<nav class="menu">
<div class="logo">
	<img src="images/logo.png" />
</div>
	<ul>
        <li><a href="#start">Welcome</a></li>
		<li><a href="#about" data-modal="about">About us</a></li>
		<li><a href="#team" data-modal="team">History & Technique</a></li>
		<li><a href="#portfolio" data-modal="portfolio">Buy ticket</a></li>
		<li><a href="#contact" data-modal="contact">Contact</a></li>
		<li><a href="#" class="final">Explore our Micro Art</a></li>
	</ul>
</nav>


<canvas id="overlay" class="overlay"></canvas>
<div id="about" class="modal">
	<div class="modal__inner col--10of12-sm col--7of12-l text--center">
		<h1>About Us</h1>
		<p>Miniature art has been made for over 1000 years and is prized by collectors. Whether a portrait painted on the side of poppy seed or a caravan of camels marching through the eye of a needle, micro-miniature art grants us access to a tiny world full of massive possibilities. With roots dating back to the medieval times, collectors of these delicate works of art seek out the most skilled masters, who endeavor to create ever-smaller, evermore-detailed paintings, etchings and sculptures.</p>
		<p>In recent years, there has been a revival of both the craft of making the Micro Masterpieces and the audiences seeking out their work. The U.S. White House, the Smithsonian American Art Museum, Astolat Dollhouse Castle, and museums around the world have collections of miniature paintings, drawings, original prints and etchings, and sculpture.</p>
	</div>
</div>

<div id="team" class="modal">
	<div class="modal__inner col--12of12 col--10of12-l">
		<h1>History & Technique</h1>
		<p>The techniques for producing micro-miniature works of art vary as much as the art itself. When painting a portrait, some artists will use a single hair from a paint brush to apply a stroke of paint so small it would not fill even one groove on your fingerprint.</p>
		<p>Often using microscopes to properly see their creations as they work, micro-miniature sculptors will mount the finished piece on the blunt end of a severed human hair.</p>
	</div>
</div>

<div id="portfolio" class="modal">
	<div class="modal__inner col--10of12-sm">
		<h1>Buy tickets</h1>
		<div class="wcpl_group top"></div>

	</div>
</div>

<div id="contact" class="modal">
	<div class="modal__inner col--8of12-sm col--7of12-l text--center">
	<h1>Contact Us</h1>
	<p class="larger">100 St. George St. 2nd Floor</p>
	<div class="row row--sml margin-bottom--lge">
	<div class="col col--3of12-sm">
	<a href="tel:+19043737777">
	<span class="icon icon--lge"><i class="fa fa-phone" aria-hidden="true"></i></span>
	(904) 373-7777
	</a>
	</div>
	<div class="col col--3of12-sm">
	<a href="index.html#">
	<span class="icon icon--lge"><i class="fa fa-map-marker" aria-hidden="true"></i></span>
	St. Augustine, FL 32084
	</a>
	</div>
	<div class="col col--3of12-sm">
	<a href="https://www.facebook.com/" target="_blank">
	<span class="icon icon--lge"><i class="fa fa-facebook" aria-hidden="true"></i></span>
	Follow us
	</a>
	</div>
	<div class="col col--3of12-sm">
	<a href="index.html#portfolio" data-modal="portfolio">
	<span class="icon icon--lge"><i class="fa fa-ticket" aria-hidden="true"></i></span>
	Buy ticket
	</a>
	</div>
	</div>
	<div role="form" class="wpcf7" id="wpcf7-f79-o1" lang="en-US" dir="ltr">
<div class="screen-reader-response"></div>

</div>	<iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1454.3736197969959!2d-81.31245080559253!3d29.890135129526662!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x88e42796b01c416f%3A0x4284936cf69538ce!2zU3QgR2VvcmdlIFN0LCBTdCBBdWd1c3RpbmUsIEZMIDMyMDg0LCDQodCo0JA!5e0!3m2!1sru!2sua!4v1495055143093" width="100%" height="250" frameborder="0" style="border:0" allowfullscreen></iframe>
	</div>
</div>

	<div id="final" class="modal">
	    <div class="psa-topper"> 
	        <div class="modal__inner psa-miniature col--6of12-sm col--6of12-l text--center">
	            <div class="xzoom-container">
	              <img class="xzoom3" src="images/mini/micro.png" xoriginal="images/mini/micro.png">
	            </div>
	        </div> 
	    </div>
		<div class="mobile-advise">
			<div><img src="images/advise.png" /> <span>Touch on object to zoom</span></div>
		</div>
	</div>
    

	<div class="psa-clicker-top"></div>
	<div class="psa-clicker"></div>
	

    <div class="scene">
        <canvas id="scene-canvas" class="scene__canvas"></canvas>
    </div>
	
	
    
</div>
    
<div class="depth"><div class="view-element"></div></div>

    
<div id="page" class="hfeed site">

	<script src="js/libs/jquery-1.11.2.min.js"></script>
	<script src="js/libs/modernizr.custom.js"></script>
		
	<script src="js/libs/viewport-units-buggyfill.js"></script>
	<script src="js/libs/underscore-min.js"></script>
	<script src="js/libs/pubsub.js"></script>
<!-- 	<script src="js/libs/jquery.flexslider.js"></script> -->
	<script src="js/libs/jquery.scrollmagic.min.js"></script>
	<script src="js/libs/jquery.scrollmagic.debug.js"></script>
	<script src="js/libs/tweenmax.min.js"></script>
	<script src="js/libs/tweenmax.ScrollToPlugin.min.js"></script>
	<script src="js/utils.js"></script>
	<script src="js/preloader.js"></script>
	<script src="js/overlay.js"></script>
	<script src="js/page.js"></script> 
	<script src="js/modals.js"></script>
	<script src="js/points.js"></script>
	<script src="js/zoom.js"></script>
<!-- 	<script src="js/contact.js"></script> -->
	<script src="js/xzoom.min.js"></script>
<!-- 	<script src="js/jquery.hammer.min.js"></script> -->
	
<script>
var $ = jQuery.noConflict();

var keys = [37, 38, 39, 40];

// function preventDefault(e) {
//   e = e || window.event;
//   if (e.preventDefault)
//       e.preventDefault();
//   e.returnValue = false;  
// }

function keydown(e) {
    for (var i = keys.length; i--;) {
        if (e.keyCode === keys[i]) {
            preventDefault(e);
            return;
        }
    }
}

function wheel(e) {
  // preventDefault(e);
}

// отключить скролл
function disable_scroll() {
  if (window.addEventListener) {
      window.addEventListener('DOMMouseScroll', wheel, false);
  }
  window.onmousewheel = document.onmousewheel = wheel;
  document.onkeydown = keydown;
}

// включить скролл
function enable_scroll() {
    if (window.removeEventListener) {
        window.removeEventListener('DOMMouseScroll', wheel, false);
    }
    window.onmousewheel = document.onmousewheel = document.onkeydown = null;  
}
    
// плавное появление последнего экрана	
function psaAnimation() {
    $('.psa-topper').addClass('psa-anim');
}
    
$('.header__btn-close').click(function() {
      $('.psa-topper').removeClass('psa-anim');
});

    
$(function () {
	
    var $win = $(window);
	var body = $('body');
	
	// клик в любое место = приближение
//	$('#scene-canvas').click(function() {
//		$('html,body').animate({
//			scrollTop: body.scrollTop()+500},
//			'slow');
//	});

	$('.psa-clicker').click(function() {
		$('html,body').animate({
			scrollTop: body.scrollTop()+476},
			'slow');
	});	
	
	$('.psa-clicker-top').click(function() {
		$('html,body').animate({
			scrollTop: body.scrollTop()+476},
			'slow');
	});	
	 	  
 });
    
// увеличение миниатюры по наведению	
(function ($) {
    $(document).ready(function() {
		
        $('.xzoom3').xzoom({
		position: 'lens',
		lensShape: 'circle',
		bg: true,
		sourceClass: 'xzoom-hidden',
		fadeIn: true,
		scroll: false,
		adaptive:true
		});

        //Integration with hammer.js
        var isTouchSupported = 'ontouchstart' in window;

        if (isTouchSupported) {
            //If touch device
            $('.xzoom, .xzoom2, .xzoom3, .xzoom4, .xzoom5').each(function(){
                var xzoom = $(this).data('xzoom');
                xzoom.eventunbind();
            });
            
            $('.xzoom, .xzoom2, .xzoom3').each(function() {
                var xzoom = $(this).data('xzoom');
                $(this).hammer().on("tap", function(event) {
                    event.pageX = event.gesture.center.pageX;
                    event.pageY = event.gesture.center.pageY;
                    var s = 1, ls;
    
                    xzoom.eventmove = function(element) {
                        element.hammer().on('drag', function(event) {
                            event.pageX = event.gesture.center.pageX;
                            event.pageY = event.gesture.center.pageY;
                            xzoom.movezoom(event);
                            event.gesture.preventDefault();
                        });
                    }
    
                    xzoom.eventleave = function(element) {
                        element.hammer().on('tap', function(event) {
                            xzoom.closezoom();
                        });
                    }
                    xzoom.openzoom(event);
                });
            });

        $('.xzoom4').each(function() {
            var xzoom = $(this).data('xzoom');
            $(this).hammer().on("tap", function(event) {
                event.pageX = event.gesture.center.pageX;
                event.pageY = event.gesture.center.pageY;
                var s = 1, ls;

                xzoom.eventmove = function(element) {
                    element.hammer().on('drag', function(event) {
                        event.pageX = event.gesture.center.pageX;
                        event.pageY = event.gesture.center.pageY;
                        xzoom.movezoom(event);
                        event.gesture.preventDefault();
                    });
                }

                var counter = 0;
                xzoom.eventclick = function(element) {
                    element.hammer().on('tap', function() {
                        counter++;
                        if (counter == 1) setTimeout(openfancy,300);
                        event.gesture.preventDefault();
                    });
                }

                function openfancy() {
                    if (counter == 2) {
                        xzoom.closezoom();
                        $.fancybox.open(xzoom.gallery().cgallery);
                    } else {
                        xzoom.closezoom();
                    }
                    counter = 0;
                }
            xzoom.openzoom(event);
            });
        });
        
        $('.xzoom5').each(function() {
            var xzoom = $(this).data('xzoom');
            $(this).hammer().on("tap", function(event) {
                event.pageX = event.gesture.center.pageX;
                event.pageY = event.gesture.center.pageY;
                var s = 1, ls;

                xzoom.eventmove = function(element) {
                    element.hammer().on('drag', function(event) {
                        event.pageX = event.gesture.center.pageX;
                        event.pageY = event.gesture.center.pageY;
                        xzoom.movezoom(event);
                        event.gesture.preventDefault();
                    });
                }

                var counter = 0;
                xzoom.eventclick = function(element) {
                    element.hammer().on('tap', function() {
                        counter++;
                        if (counter == 1) setTimeout(openmagnific,300);
                        event.gesture.preventDefault();
                    });
                }

                function openmagnific() {
                    if (counter == 2) {
                        xzoom.closezoom();
                        var gallery = xzoom.gallery().cgallery;
                        var i, images = new Array();
                        for (i in gallery) {
                            images[i] = {src: gallery[i]};
                        }
                        $.magnificPopup.open({items: images, type:'image', gallery: {enabled: true}});
                    } else {
                        xzoom.closezoom();
                    }
                    counter = 0;
                }
                xzoom.openzoom(event);
            });
        });

        } else {
            //If not touch device

            //Integration with fancybox plugin
            $('#xzoom-fancy').bind('click', function(event) {
                var xzoom = $(this).data('xzoom');
                xzoom.closezoom();
                $.fancybox.open(xzoom.gallery().cgallery, {padding: 0, helpers: {overlay: {locked: false}}});
                event.preventDefault();
            });
           
            //Integration with magnific popup plugin
            $('#xzoom-magnific').bind('click', function(event) {
                var xzoom = $(this).data('xzoom');
                xzoom.closezoom();
                var gallery = xzoom.gallery().cgallery;
                var i, images = new Array();
                for (i in gallery) {
                    images[i] = {src: gallery[i]};
                }
                $.magnificPopup.open({items: images, type:'image', gallery: {enabled: true}});
                event.preventDefault();
            });
        }
    });
})(jQuery);

</script>

<script type="text/javascript" src="js/jquery.visible.min.js"></script>

<script>


    // событие по появлению обьекта
    var elem = $('.view-element');
    var container = $('.depth');

    $(document).ready(function(){
		
		// ссылка на последний пункт меню (final)
		$('.final').click(function() {
			 $("html, body").animate({ scrollTop: $(document).height() }, 1000);
			 $('body').removeClass('menu-active');
			 $('#overlay').removeClass('overlay--active');
			 $('.modal').removeClass('modal--active modal--visible');
			 $('body').removeClass('modal-active');
			 $('.scene').removeClass('psa-blur');
		});
		
        $(window).scroll(function(){
            var isVisible = typeof container !== 'undefined' && container !== null ? $(elem).visible(false, false, 'both', container) : $(elem).visible();
            if(isVisible) {
				disable_scroll();
                $('#final').addClass('modal--active modal--visible');
				$('body').addClass('modal-active');
				$('.scene').addClass('psa-blur');
				window.setTimeout('psaAnimation()',500);
				// спрятать стандартный крестик
				$('.js-modal-close').hide();
				// показать новый крестик
				//$('header.header').append('<a class="psa-btn-close"><span></span><span></span></a>');
				$('.psa-btn-close').show();
				
				// прячем элемент
				elem.hide();

            }
        });
		
		// при клике на последний новый крестик будет отдаление на начало
		$('.psa-btn-close').click(function() {
				$('#final').removeClass('modal--active modal--visible');
				$('body').removeClass('modal-active final-img');
				$('.scene').removeClass('psa-blur');     
				$('.psa-topper').removeClass('psa-anim');				
				$("html, body").animate({ scrollTop: 0 }, 2000, function(){
					enable_scroll();
				});
				$('.psa-btn-close').hide();
				window.setTimeout(function(){
					// показывем элемент
					elem.show();
					},1000);
				
		});
    });
</script>

</div><!-- #page -->

</body>
</html>
